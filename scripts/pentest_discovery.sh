#!/bin/bash
# pentest_discovery.sh - Phase de dÃ©couverte pour pentesting automatisÃ©
set -euo pipefail

# Fichier contenant la liste des cibles (une adresse IP ou domaine par ligne)
TARGET_LIST="targets.txt"
# Dossier de sortie pour les rÃ©sultats
OUTPUT_DIR="pentest_results"
mkdir -p "$OUTPUT_DIR"

if [[ ! -f "$TARGET_LIST" ]]; then
    echo "Fichier $TARGET_LIST introuvable" >&2
    exit 1
fi

while IFS= read -r target; do
    [[ -z "$target" ]] && continue
    echo "[+] Scan de $target"
    nmap -sV -oX "$OUTPUT_DIR/${target}_discovery.xml" "$target"
done < "$TARGET_LIST"

echo "ðŸ“„ RÃ©sultats enregistrÃ©s dans $OUTPUT_DIR/"
